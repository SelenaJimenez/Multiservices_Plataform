<!DOCTYPE html>
<html lang="en">
<link rel = "shorcut icon" type="image/x-icon" href="img/logo2.png">
<head>
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <title>Multiservices</title>
        <link rel="stylesheet" href="CSS/main.css"/>
        <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
        <script src="https://www.gstatic.com/firebasejs/5.7.2/firebase.js"></script>
        <script>
      // Initialize Firebase
      var config = {
        apiKey: "AIzaSyBxGF4EGHE-6tmzA60DZktJLslX8n2ThFc",
        authDomain: "fabulus-a7471.firebaseapp.com",
        databaseURL: "https://fabulus-a7471.firebaseio.com",
        projectId: "fabulus-a7471",
        storageBucket: "fabulus-a7471.appspot.com",
        messagingSenderId: "608667945769"
      };

      firebase.initializeApp(config);
    </script>


</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <a class="navbar-brand" href="servicios.html"><img class="logoCircle" src="img/logo.png"></a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
     
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav mr-auto">
            <li class="nav-item active">
              <a class="nav-link" href="main.html">Inicio<span class="sr-only">(current)</span></a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="servicios.html">Servicios</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="acerca.html">Acerca de</a>
            </li>
     
          </ul>


          <button class="botonBarra" onclick="location.href='publicar.html'">Crear publicaci贸n</button>
          <button class="botonCerrar" onclick='cerrar()'>Cerrar sesi贸n</button>

        </div>
       </nav>

<div class="container" >

    <h1 class="text-center back pt-5" id="title2"></h1>

    <section id="usuario" >
    <div id="contenedor">
    <div  class="row">

    <div class="btn-group">
     <div class="col-md-2"><a href="main.html"><button  class="butS"> Perfil</button></a></div>
        <div class="col-md-2 offset-md-1"><a href="anuncios.html"><button class="button">Anuncios</button></a></div>
        <div class="col-md-2 offset-md-1"><a href="mensajes.html"><button class="button">Mensajes</button></a></div>
        <div class="col-md-2 offset-md-1"><button class="button">Notificaciones</button></div>
    </div>
    </div>

    <hr>
    <div class="row pt-3">
      <div class="col-md-2 offset-md-2">
          <div  ondblclick="cambiarim();">
            <div id="photo">  </div> 
            <div id='imbtn'></div>
          </div>
          <div class="text-center">
          <p class="pt-2 mb-0">Calificaci贸n:</p>
          <div id='star'>
          <i class="fas fa-star"></i>
          <i class="fas fa-star"></i>
          <i class="fas fa-star"></i>
          <i class="fas fa-star"></i>
          <i class="fas fa-star"></i>
          </div>
        </div>
      </div>
      <div class="col-md-6 ">

          <h4>Informaci贸n personal</h4>
          <table class="table">
            <tr>
              
                <th scope="row">Nombre</th>
              
               
                <td id="UserName"; ondblclick='cambiartexto("UserName")';> </td>
               
              
              
            </tr>
            <tr>
              <th scope="row">Fecha de Nacimiento</th>
                  <td id="FechaNacimiento"; ondblclick='cambiartexto("FechaNacimiento")';> </td>
            <tr>
              <tr>
                <th scope="row">Pais</th>
                
                  <td id="Pais"; ondblclick='cambiartexto("Pais")'; > </td>
                
              <tr>
          </table>

      </div>
    </div>
    <div class="row mt-5" >
      <div class="col-md-8 offset-md-2"; id="Biografia"; ondblclick='cambiarbio("Biografia")' >
      <p>  </p>
      </div>
    </div>
 
    </section>
</div>


    <script>
      
      var star=document.getElementById('star');
      var Name=document.getElementById('UserName');
      var topic=document.getElementById('title2');
      var date=document.getElementById('FechaNacimiento');
      var pais=document.getElementById('Pais');
      var biblio=document.getElementById("Biografia");
      var foto=document.getElementById('photo');
      firebase.auth().onAuthStateChanged(function(user) {      
            var uid= user.uid;
            firebase.database().ref("Usuario/"+uid).child("UserName").once("value", function(snapshot) {
              var x=snapshot.val(); 
              if(x==null){
                
                Name.innerHTML="Doble Click para ingresar fecha"
               
              }
              else{
                Name.innerHTML= x; 
              }
            
          
          });
            firebase.database().ref("Usuario/"+uid).child("FechaNacimiento").once("value", function(snapshot) {
              var x=snapshot.val(); 
              if(x==null){
                
                date.innerHTML="Doble Click para ingresar fecha"
               
              }
              else{
                date.innerHTML= x; 
              }
          });
          firebase.database().ref("Usuario/"+uid).child("Pais").once("value", function(snapshot) {
            var x=snapshot.val(); 
              if(x==null){
                
                pais.innerHTML="Doble Click para ingresar Pais"
               
              }
              else{
                pais.innerHTML= x; 
              }
               
          });
          firebase.database().ref("Usuario/"+uid).child("Biografia").once("value", function(snapshot) {
            var x=snapshot.val(); 
              if(x==null){
                
                biblio.innerHTML="Doble Click para ingresar Bibliografia"
               
              }
              else{
                biblio.innerHTML= x; 
              }
          });
          firebase.database().ref("Usuario/"+uid).child("star").once("value", function(snapshot) {
            var x=snapshot.val(); 
              if(x==null){
                
                star.innerHTML="N/A"
               
              }
              else{
                star.innerHTML= x; 
              }
             
          });
          firebase.database().ref("Usuario/"+uid).child("photo").once("value", function(snapshot) {
            var x=snapshot.val(); 
              if(x==null){
                foto.innerHTML="<img src='img/user.png'/> <p>Doble Click para ingresar una foto</p>"
              }
              else{
                foto.innerHTML="<img src="+x+"/>";  
              }
          });
         

        });


   ////////////////CAMBIAR COSAS     
  function cambiartexto(valor){
   
    var Name=document.getElementById(valor);

    valor2=valor+"1";
    Name.innerHTML="<input id="+'"'+valor2+'"'+" maxlength='30' placeholder="+"Cambiar "+valor+"></input > <button onclick="+
    '"'+"preActualizar("+"'"+valor+"'"+')"'+"; > Actualizar </button>";
      }  
   function cambiarbio(valor){
   
   var Name=document.getElementById(valor);

   valor2=valor+"1";
   Name.innerHTML="<input id="+'"'+valor2+'"'+" maxlength='300' style=' width:300px; height:50px'  placeholder="+"Cambiar "+valor+"></input > <button onclick="+
   '"'+"preActualizar("+"'"+valor+"'"+')"'+"; > Actualizar </button>";
     }       
     
  
  function preActualizar(campo){
    
    var info = document.getElementById(campo+"1").value;
    
    Actualizar(campo, info);
    alert("Campo actualizado");
    window.location.replace("main.html")
  }

  </script>


  

  <script src="java/actualizarPerfil.js"></script>
  <script src="java/app.js"></script>
  
    <!-- Optional JavaScript -->
   <!-- jQuery first, then Popper.js, then Bootstrap JS -->
   <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
   <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
 </body>
</body>
</html>
